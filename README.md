# ThreadScript

ThreadScript is a simple embeddable scripting language intended primarily as
a configuration language for multithreaded C++ programs. It is implemented in
C++20.

## Author

Martin Beran

<martin@mber.cz>

## License

This software is available under the terms of BSD 2-Clause License, see
file [LICENSE.md](LICENSE.html).

## Current status (as of 2022-08-14)

This is a work in progress, in active development. It does not do anything
useful yet.

In order to build code and documentation, recent versions of tools are needed.
Currently, it is being developed with:

- GCC 12.0.1
- libstdc++ 12-20220319
- Doxygen 1.9.3
- CMake 3.22.1 (3.18.4 should be sufficient)

Already done, possibly usable in other projects:

- build (CMake), documentation (Doxygen), and testing (Boost.Test)
  infrastructure
- temporary debugging messages
- resource management (finalizers, allocators)
- a generic parser with rules defined directly in C++ code (similar to
  Boost.Spirit)
- parsing source code using a simple syntax
- executing parsed internal representation of a script

Required for at least marginally usable multithreading scripting language:

- implement a basic set of commands and functions
- complete a public C++ API
- implement a basic set of thread synchronization and communication functions

## Repository structure

- `doc/` – documentation
- `src/` – source code
- `test/` – automatic tests, including various sample scripts

## Build

Build libraries, the command line interpreter, tests, and basic (Markdown)
documentation:

    mkdir build
    cd build
    cmake ..
    cmake --build . -j `nproc`

A clean build of libraries, the command line interpreter, tests, all
documentation (Markdown and Doxygen), running `clang-tidy` on sources, and
running tests:

    mkdir build
    cd build
    cmake ..
    cmake --build . -t full

The full build with tests like the previous one, but repeated with all
supported sanitizers:

    rm -rf build-sanitizer-*
    ./make-everything.sh

## Run

    build/src/ts -t `nproc` script.ts

## [Documentation](html/index.html)

Documentation of ThreadScript is generated by Doxygen from comments in source
code and from files in subdirectory `doc/` into build subdirectory
[html/](html/index.html) by command

    make doxygen
